# 네트워크 기초
네트워크란 노드와 링크가 서로 연결되어 있는 집합이거나 연결되어 있으며 리소스를 공유하는 집합을 의미한다.  
> 노드: 서버, 라우터, 스위치 등 네트워크 장치  
링크: 유선 혹은 무선
## 네트워크 처리량과 지연시간 
##### 처리량(throughput)
- 링크를 통해 전달되는 단위 시간당 데이터 양  

        || 단위 - bps(bits per second) 초당 전송 / 수신되는 비트 수 ||   
- 트래픽, 네트워크 장치간의 대역폭, 네트워크 에러, 장치의 하드웨어 스펙 등에 영향을 받는다.  

##### 지연 시간(latency)
- 요청이 처리되는 시간  
- 매체 타입, 패킷 크기, 라우터 패킷 처리 시간에 영향을 받는다. 
  
> **패킷?**   
IT에서 패킷 방식의 컴퓨터 네트워크가 전달하는 데이터의 형식화된 블록 ,   
컴퓨터 네트워크에서 데이터를 주고받을 때 정해놓은 규칙

## 네트워크 토폴로지와 병목 현상
`네트워크 토폴로지` : 노드와 링크가 어떻게 배치 되어 있는지에 대한 방식,  **연결 형태**  

네트워크 토폴로지는 5가지로 나뉘는데, 트리 토폴로지, 버스 토폴로지, 스타 토폴로지, 링형 토폴로지, 메시 토폴로지가 있다. 

#### 트리 토폴로지
계층형 토폴로지라고 하며, 트리형태로 배치한 네트워크 구성이다.  
노드의 추가, 삭제가 용이하며 특정 노드에 트래픽이 집중될 때 하위 노드에 영향을 끼칠 수 있다.  

#### 버스 토폴로지
중앙 통신 회선 하나에 여러개의 노드가 연결되어 공유하는 네트워크 구성을 말하며, 근거리 통신망 LAN에 사용된다.  
설치비용이 적고, 신뢰성이 우수하며 중앙 통신 회선에 노드를 추가, 삭제하기가 쉽다. `스푸핑`이 가능하다는 문제가 있다. 

> ##### 스푸핑?  
> 스푸핑이란 LAN 상에서 송신부의 패킷을 송신과 관련없는 다른 호스트에 가지 않도록하는 `스위칭 기능을 마비시키거나 속여서` 특정 노드에 해당 패킷이 오도록 처리하는 것 

#### 스타 토폴로지
중앙에 있는 노드에 모두 연결된 네트워크 구성을 말한다.  
노드를 추가하거나 에러를 탐지하기 쉽고, 패킷의 충돌 발생 가능성이 적다.  
에러를 발견하기 쉽고, 에러가 발생한 노드가 중앙 노드가 아니라면 다른 노드에 영향을 끼치는 것이 적다. 하지만 중앙 노드에 에러가 발생했다면 전체 노드가 영향을 받아 사용할 수 없게 된다. 또한 설치 비용이 비싸다. 

#### 링형 토폴로지
각각의 노드가 양 옆의 두 노드와 연결하여 전체적으로 고리처럼 하나의 연속된 길을 통해 통신하는 망 구성방식이다.  
데이터는 노드에서 노드로 이동을 하며, 각각 노드는 고리 모양의 길을 통해 패킷을 처리한다.  
노드 수가 증가되어도 네트워크상의 손실이 거의 없고, 충돌이 발생하는 가능성이 적고, 에러 발견을 쉽게 찾을 수 있다.   
네트워크 구성 변경이 어렵고, 회선에 에러가 발생하면 전체 네트워크에 영향을 끼친다는 단점이 있다.  

#### 메시 토폴로지
망형 토폴로지라고도 하며 그물망처럼 연결되어 있는 구조로 모든 노드가 서로 연결되어있다.  하나의 노드에 장애가 발생해도 여러 경로로 연결되어 있기 때문에, 네트워크를 계속 사용할 수 있다. 트래픽도 분산 처리가 가능하다.  
노드의 추가가 어렵고, 구축 비용과 운용 비용이 비싸다는 단점이 있다. 

### 병목 현상
병목현상은 전체 시스템의 성능이나 용량이 하나의 구성 요소로 인해 제한을 받는 현상을 의미한다.  
> 서비스에서 이벤트를 열었을 때, 트래픽이 많이 생기고, 그 트래픽을 잘 관리하지 못하면 병목현상이 생겨 사용자들이 웹 사이트로 들어가기 어려워지는 문제가 발생한다. 

네트워크 토폴로지를 이해하고 있어야 병목 현상을 해결할 수 있다.  


## 네트워크 분류
네트워크를 규모에 따라 분류하면, 개인 소유의 규모인 LAN, 서울시 정도의 규모인 MAN, 세계 규모의 WAN으로 나뉜다. 
#### LAN(Local Area Network)
근거리 통신망을 의미하며, 같은 건물이나 캠퍼스 같은 좁은 공간에서 컴퓨터 및 각종 기기를 통신회선으로 연결한 통신망을 의미한다.  
전송 속도가 빠르고 혼잡하지 않다. 
#### MAN(Metropolitan Area Network)
대도시 지역 네트워크를 나타내며 도시 같이 넓은 지역에서 운영된다.  
일반적으로 여러 개의 LAN을 라우터로 상호 연결한다.  
전송 속도는 평균이며 LAN보다는 더 혼잡하다.  
#### WAN(Wide Area Network)
광역 네트워크를 의미하며, 국가 혹은 대륙과 같이 더 넓은 지역에서 운영된다.   
일반적으로 공중 통신 사업자 Public Switching Data Network Provider가 제공하는 전용회선을 연결하여 사용한다. 
전송속도는 낮으며, 혼잡하다.  

## 네트워크 성능 분석 명령어
코드 상으로는 전혀 문제가 없는데 데이터를 불러오지 못하는 경우가 있는데, 이는 `네트워크 병목현상`으로 인한 문제일 수 있다. 
> **네트워크 병목 현상 주요 원인**
> 1. 네트워크 대역폭
> 2. 네트워크 토폴로지
> 3. 서버 CPU, 메모리 사용량
> 4. 비효율적인 네트워크 구성

### 네트워크 성능 테스트에 사용되는 명령어들
#### ping
`ping`(Packet Internet Groper)은 네트워크 상태를 확인하려는 대상 노드를 향해 일정한 크기의 패킷을 전송하는 명령어이다. 해당 도메인에 IP를 확인할 때 많이 사용한다.  
ping 명령어를 통해 해당 노드의 패킷 수신 상태와 도달하기까지에 걸리는 시간 등을 알 수 있으며, 해당 노드까지 네트워크가 연결이 잘 되어있는지를 확인할 수 있다.  
원격 대상 IP가 활성인지 비활성인지 확인할 수 있습니다. 또한 대상과의 통신에서 왕복 지연을 찾아 패킷 손실이 있는지 확인할 수 있습니다.  
ping은 TCP/IP 프로토콜 중에서 ICMP 프로토콜을 통해 동작하기 때문에, ICMP 프로토콜을 지원하지 않거나, ICMP / traceroute를 차단하는 대상일 경우 테스팅이 불가하다.  
`ping[IP주소 or 도메인주소]`
> ping www.google.com -n 12  
-n 12 : 12번의 패킷을 보내고 12번의 패킷을 받는다는 옵션임  
옵션을 주지 않는다면 기본적으로 4회 실행  
-l 64 : 패킷의 크기를 64바이트로 지정하여 실행

##### 결과로 알 수 있는 사항
도메인 google.co.kr IP는 172.217.26.227으로 확인
32바이트 패킷을 12회 보낸 결과 각각 56ms, 57ms 등으로 응답이 온 것이 확인

##### ping의 결과가 네트워크가 느리거나 잘 연결되지 않았다고 나온다면 ?
ping 테스트 결과가 느리거나 접속이 안되면 tracert(traceroute)를 이용해서 어떤 라우터에서 문제를 일으키는지 살펴 볼 수 있습니다. tracert 명령어를 사용하면 출발지에서 목적지까지 거쳐가는 모든 라우터의 응답시간을 확인 할 수 있습니다.

#### netstat
`netstat`은 접속되어있는 서비스들의 `네트워크 상태를 표시`하는 데 사용된다. 서비스 포트가 열려 있는지 확인하는 데 사용된다. 네트워크 접속, 라우팅 테이블, 네트워크 프로토콜 등 리스트를 보여준다. 

#### nslookup
`nslookup`은 DNS에 관련된 내용을 확인하기 위해 사용하는 명령어로, 특정 도메인에 매핑된 IP를 확인하기 위해 사용한다. 

#### tracert(traceroute)
`tracert`는 출발지 노드부터 목적지 노드까지 모든 네트워크 경로를 확인할 때 사용하는 명령어로, 어느 구간에서 응답 시간이 느려지는지 등을 확인할 수 있다. 

---
외로, ftp를 통해 대형 파일을 전송하여 테스팅하거나 tcpdump를 통해 노드로 오고 가는 패킷을 캡쳐하는 등의 명령어가 있으며, 네트워크 분석 프로그램으로는 wireshark, netmon이 있다. 


## 네트워크 프로토콜 표준화
네트워크 프로토콜 : 다른 장치들끼리 데이터를 주고 받기 위해 설정된 공통된 인터페이스, 규칙의 집합  
IEEE, IETF라는 표준화 단체가 결정  
- 프로토콜의 역할 : 이기종 간의 통신을 가능케 함
- 프로토콜 표준화의 특징
    - 다양한 장비를 망에서 사용 가능케 함
    - 시장규모형성으로 융통성(같이 쓸 수 있게 함)을 부여함 
    - 통신 방법의 단순화